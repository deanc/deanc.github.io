<!doctype html><html><head><meta charset=utf-8><meta name=generator content><title>How to avoid relying on github: mirror your repository
</title><meta property="og:title" content="How to avoid relying on github: mirror your repository"><meta name=description content="One of the things that recent github outages have highlighted is that although git is designed to be decentralized version control system, many people are not treating it that way. Rather than having multiple remotes, people push to the same place and generally rely too much on github. I&rsquo;ve seen people build their whole infrastructure around github, including deploy scripts for their sites and install scripts for new developers. Furthermore, dependency managers such as Composer & Cocoapods (not intending to single anyone out) rely on github to pull in dependencies. If github goes down, you can&rsquo;t fix your dependencies or pull in new ones. In an ideal world these dependency managers should have built in support for mirrors, but I&rsquo;m not aware of any such feature at the time of writing."><meta property="og:description" content="One of the things that recent github outages have highlighted is that although git is designed to be decentralized version control system, many people are not treating it that way. Rather than having multiple remotes, people push to the same place and generally rely too much on github. I&rsquo;ve seen people build their whole infrastructure around github, including deploy scripts for their sites and install scripts for new developers. Furthermore, dependency managers such as Composer & Cocoapods (not intending to single anyone out) rely on github to pull in dependencies. If github goes down, you can&rsquo;t fix your dependencies or pull in new ones. In an ideal world these dependency managers should have built in support for mirrors, but I&rsquo;m not aware of any such feature at the time of writing."><meta property="og:url" content="https://deanclatworthy.com/2013/01/how-to-avoid-relying-on-github-mirror-your-repository/"><meta property="og:site_name" content="DeanClatworthy.com"><meta property="og:image" content="https://deanclatworthy.com//img/share.jpg"><meta name=theme-color content="#DE6262"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5"><link media=all rel=stylesheet href=https://deanclatworthy.com/css/fonts.min.afa67f15066f1a7b3a58de3695ac187abf3d0eeab2d5af15d2006ba2e4576d36.css><link media=all rel=stylesheet href=https://deanclatworthy.com/sass/main.min.c58d6045bb953a6ce98a2707382733e1c826720d60d19749a7ccce1a0c10f6e2.css><link rel=apple-touch-icon sizes=180x180 href=https://deanclatworthy.com//img/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://deanclatworthy.com//img/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://deanclatworthy.com//img/favicons/favicon-16x16.png><link rel=manifest href=https://deanclatworthy.com//img/favicons/site.webmanifest><link rel=mask-icon href=https://deanclatworthy.com//img/favicons/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#000000"><meta name=theme-color content="#ffffff"><link rel=alternate type=application/rss+xml title=RSS href=https://deanclatworthy.com//index.xml></head><body><a id=top></a><main><p class=go-back><a class=button href=/archive.html>&#171; Back to all articles</a></p><h1>How to avoid relying on github: mirror your repository</h1><p class=date>01 January 2013</p><article><p>One of the things that <a href=https://github.com/blog/1364-downtime-last-saturday>recent github outages</a> have highlighted is that although git is designed to be decentralized version control system, many people are not treating it that way. Rather than having multiple remotes, people push to the same place and generally rely too much on github. I&rsquo;ve seen people build their whole infrastructure around github, including deploy scripts for their sites and install scripts for new developers. Furthermore, dependency managers such as <a href=http://getcomposer.org/>Composer</a> & <a href=http://cocoapods.org/>Cocoapods</a> (not intending to single anyone out) rely on github to pull in dependencies. If github goes down, you can&rsquo;t fix your dependencies or pull in new ones. In an ideal world these dependency managers should have built in support for mirrors, but I&rsquo;m not aware of any such feature at the time of writing.</p><p><strong>What I&rsquo;m going to illustrate is how easy it is to set up your git remotes so you push to two places</strong>. If github goes down, it doesn&rsquo;t matter, assuming everyone on your team follows this guide the code will also be on bitbucket, or wherever else you choose. But this tutorial will mirror to github & bitbucket. Let&rsquo;s begin.</p><ol><li>Firstly, I&rsquo;m going to assume you have a remote set up already for github named “origin”. Rename it to “github:</li></ol><div class=highlight><pre tabindex=0 style=color:#3760bf;background-color:#e1e2e7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git remote rename origin github
</span></span></code></pre></div><ol start=2><li>Create a new repository on bitbucket and name it the same as the one on github.</li><li>Add it as a remote using the instructions provided. But make sure you call it “bitbucket” and not “origin”. Something like so:</li></ol><div class=highlight><pre tabindex=0 style=color:#3760bf;background-color:#e1e2e7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git remote add bitbucket ssh://git@bitbucket.org/username/somerepo.git
</span></span><span style=display:flex><span>git push -u bitbucket --all
</span></span></code></pre></div><ol start=4><li>Next type:</li></ol><div class=highlight><pre tabindex=0 style=color:#3760bf;background-color:#e1e2e7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git config -e
</span></span></code></pre></div><p>This will open up a text editor and allow you to edit your git configuration.</li></p><ol start=5><li>We need to add the urls for every remote so far (github and bitbucket) into a new remote called “origin”. It should look something like this:</li></ol><div class=highlight><pre tabindex=0 style=color:#3760bf;background-color:#e1e2e7;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#9854f1>[remote &#34;origin&#34;]</span>
</span></span><span style=display:flex><span>        <span style=color:#2e7de9>url</span> <span style=color:#587539;font-weight:700>=</span> <span style=color:#587539>git@github.com:username/somerepo.git
</span></span></span><span style=display:flex><span><span style=color:#587539>        url = ssh://git@bitbucket.org/username/somerepo.git</span>
</span></span></code></pre></div><ol start=6><li>Next time you run <code>git push origin </code>it will push to both</li></ol><p>And that&rsquo;s it. It&rsquo;s as simple as that.</p><p>Recent of versions of git allow you to add multiple places per remote like this using git commands, but I prefer to see exactly what is going on in the configuration.</p><p>**Update #1: **reddit user MatmaRex <a href=http://www.reddit.com/r/programming/comments/16jk97/how_to_avoid_relying_on_github_mirror_your/c7wnycx>makes a very valid point</a> to be careful renaming remotes if you have any remote branches. I&rsquo;ve updated the instructions to reflect this.</p></article><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//deanclatworthy.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><footer><p>&copy; 2024 Dean Clatworthy | <a rel="nofollow noindex" href=#top>Back to top</a></p></footer></main><script async src=/js/form.b721ea0c53adde10805845e816a2dd7821ed44493cf37adb15087e9f75a19f99.js integrity="sha256-tyHqDFOt3hCAWEXoFqLdeCHtREk883rbFQh+n3Whn5k=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-BKE986PPRZ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-BKE986PPRZ")</script></body></html>